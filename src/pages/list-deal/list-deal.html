<ion-header>
  <ion-toolbar color=tertiary>

    <ion-buttons start>
      <button ion-button icon-only (click)="openModal()">
        <ion-icon name="options"></ion-icon>
      </button>
    </ion-buttons>

    <ion-segment [(ngModel)]="choice">
      <ion-segment-button value="eat" (click)="getDeal()">J'ai faim</ion-segment-button>
      <ion-segment-button value="drink" (click)="getDeal()">J'ai soif</ion-segment-button>
    </ion-segment>

    <ion-buttons end>
      <button ion-button icon-only (click)="goAddDeal()">
        <ion-icon name="add"></ion-icon>
      </button>
    </ion-buttons>

  </ion-toolbar>
</ion-header>


<ion-content [ngSwitch]="choice">

  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" refreshingSpinner="circles" refreshingText="Chargement...">
    </ion-refresher-content>
  </ion-refresher>

  <ion-searchbar (ionInput)="getItems($event)"></ion-searchbar>
  <ion-list>
    <button ion-item *ngFor="let tab of deals.records" (click)="itemTapped($event, tab)" padding>
      <ion-thumbnail item-start *ngIf="isPhoto(tab.photo)">
        <img src="../../assets/imgs/logo.png">
      </ion-thumbnail>
      <ion-thumbnail item-start *ngIf="!isPhoto(tab.photo)">
        <ion-icon name="image" style='color: #aaa6a6d3; font-size: 50px'></ion-icon>
      </ion-thumbnail>

      <p>
        <span class="note">5.5</span>
      </p>
      <!--{{tab.note}}-->
      <p>
        <span class="nom-enseigne">{{tab.nom}}</span>
      </p>
      <p>
        <span class="description">{{tab.description}}</span>
      </p>
      <ion-icon name="chatbubbles" color=tertiary margin-top></ion-icon>
      <span class="commentaire">3</span>
      <!--{{deal.comments.length}}-->
      <a (click)="itemTapped($event, tab)">
        <span class="manger">Allons manger...</span>
      </a>
    </button>
  </ion-list>

</ion-content>
